<script>
  const API_URL = "https://script.google.com/macros/s/AKfycbxPQCmFSUG_9W2N62hqo7tPI6M_T9GCFD2FveCnA8uOYZ0lHLmSNMQDIufXP03vmybZfg/exec";

  async function testAPI() {
    try {
      console.log("Fetching from API...");
      const res = await fetch(API_URL + "?t=" + Date.now());
      console.log("Response status:", res.status);
      const rawText = await res.text();
      console.log("Raw response:", rawText);
      
      const data = JSON.parse(rawText);
      console.log("Parsed JSON:", data);
      console.log("Is array?", Array.isArray(data));
      console.log("Number of tiles:", data.length || 0);
      
      // Show a simple test tile if data is good
      const container = document.getElementById("tilesContainer");
      container.innerHTML = '<div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:white;font-size:48px;">API Test: ' + (Array.isArray(data) ? data.length + ' tiles loaded!' : 'ERROR: Not an array') + '</div>';
    } catch (e) {
      console.error("API Error:", e);
      document.getElementById("tilesContainer").innerHTML = '<div style="color:red;font-size:24px;">Fetch failed: ' + e.message + '</div>';
    }
  }

  testAPI();
</script>
